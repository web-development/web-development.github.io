// specificity@1.0.0 downloaded from https://ga.jspm.io/npm:specificity@1.0.0/dist/esm/index.js

import{toPlainObject as t,parse as r}from"css-tree";var compare=function(t,r){return t.A!==r.A?t.A-r.A:t.B!==r.B?t.B-r.B:t.C-r.C};var compareDesc=function(t,r){return compare(r,t)};var e=(void 0,function(){e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};return e.apply(this,arguments)});var n=(void 0,function(t,r,e){if(e||2===arguments.length)for(var n,o=0,l=r.length;o<l;o++)if(n||!(o in r)){n||(n=Array.prototype.slice.call(r,0,o));n[o]=r[o]}return t.concat(n||Array.prototype.slice.call(r))});var o="*";var increment=function(t,r,o){var l;var i,u,c,a,v,d,f,s;var p=r.total,h=r.contributingParts;return{total:e(e({},p),(l={},l[o]=p[o]+1,l)),contributingParts:n(n([],h,true),[{level:o,start:{line:null!==(u=null===(i=null===t||void 0===t?void 0:t.loc)||void 0===i?void 0:i.start.line)&&void 0!==u?u:1,column:null!==(a=null===(c=null===t||void 0===t?void 0:t.loc)||void 0===c?void 0:c.start.column)&&void 0!==a?a:1},end:{line:null!==(d=null===(v=null===t||void 0===t?void 0:t.loc)||void 0===v?void 0:v.end.line)&&void 0!==d?d:1,column:null!==(s=null===(f=null===t||void 0===t?void 0:t.loc)||void 0===f?void 0:f.end.column)&&void 0!==s?s:1}}],false)}};var l=["before","after","first-line","first-letter"];var getChildrenFromPseudoClassNode=function(t){if(t.children){var r=t.children[0];return"SelectorList"===r.type?r.children:"Nth"===r.type&&r.selector?r.selector.children:t.children}return[]};var handlePseudoClassSelector=function(t,r){var e=t.name.toLowerCase();var n=getChildrenFromPseudoClassNode(t);if("not"===e||"is"===e||"has"===e){if(n.length>0)return n.map((function(t){return traverse(t,r)})).sort((function(t,r){return compareDesc(t.total,r.total)}))[0]}else{if("nth-child"===e||"nth-last-child"===e){if(n.length>0){var o=n.map((function(e){return traverse(e,increment(t,r,"B"))})).sort((function(t,r){return compareDesc(t.total,r.total)}))[0];return o}return increment(t,r,"B")}if("where"===e)return r;if("global"!==e&&"local"!==e)return l.includes(e)?increment(t,r,"C"):increment(t,r,"B");if(n.length>0)return n.reduce((function(t,r){return traverse(r,t)}),r)}return r};var traverse=function(e,n){var l,i,u,c;void 0===n&&(n={total:{A:0,B:0,C:0},contributingParts:[]});if("IdSelector"===e.type)return increment(e,n,"A");if("PseudoClassSelector"===e.type)return handlePseudoClassSelector(e,n);if("ClassSelector"===e.type||"AttributeSelector"===e.type)return increment(e,n,"B");if("TypeSelector"===e.type){if(e.name!==o)return increment(e,n,"C")}else{if("PseudoElementSelector"===e.type)return increment(e,n,"C");if("Selector"===e.type||"SelectorList"===e.type)return e.children.reduce((function(t,r){return traverse(r,t)}),n);if("Raw"===e.type)return traverse(t(r(e.value,{context:"selector",positions:true,line:null!==(i=null===(l=null===e||void 0===e?void 0:e.loc)||void 0===l?void 0:l.end.line)&&void 0!==i?i:1,column:null!==(c=null===(u=null===e||void 0===e?void 0:e.loc)||void 0===u?void 0:u.end.column)&&void 0!==c?c:1})),n)}return n};var calculate=function(e){var n=t(r(e,{context:"selector"}));return traverse(n).total};var calculateWithDetails=function(e){var n=t(r(e,{context:"selector",positions:true}));return traverse(n)};export{calculate,calculateWithDetails,compare,compareDesc};

