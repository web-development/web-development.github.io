<!DOCTYPE html>
<html lang="de" class="no-js web-development">
<head>
  <meta charset="utf-8">
  <title>Lehrbuch Web-Development - Events und Closures</title>

  <meta name="author" content="Brigitte Jellinek">
  <meta name="description" content="Ein Lehrbuch für das Informatik- oder Medieninformatik-Studium.">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="nanoc 3.8.0">

  <link rel="shortcut icon" href="/assets/img/favicon.png">
  <link rel="stylesheet" href="/assets/css/all.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <style>
    li.L0, li.L1, li.L2, li.L3, li.L5, li.L6, li.L7, li.L8 {
        list-style-type: inherit !important;
    }
    ol.linenums {
        margin-left: 50px !important;
    }

    visual-logger {
      width: 100%;
      height: 400px;
    }
  </style>
</head>
<body>

<div class="container">
  <header class="row">
    <div class="jumbotron sub-header span8" id="booktitle">
      <h1><a href="/" title="Web Development">Web Development</a></h1>
      <p class="lead">Ein Lehrbuch für das Informatik oder Medien-Informatik Studium.</p>
    </div>
  </header>




<!-- body -->
<article id="body" class="row">
  <div class="span8">
    
    <div class="page-header">
      <h2 class="title" id="slide-0">
        Events und Closures
      </h2>
      <a href="/advanced-javascript/event-und-closure/slide.html">als Präsentation ▻</a>
    </div>
     <div id="slide-1" title="Folie Nr. 1"></div><p>Dieses Kapitel ist ein Tutorial zu folgenden Projekt:
Ein SVG-Editor soll programmiert werden, mit dem man
Kreise und Rechtecke im Browser erzeugen und positioniern kann.</p>

<p>An diesem Beipiel wird die Behandlung von Event und
die Notwendigkeit von Closures erläutert.</p>

<p>Der Fokus in diesem Kapitel liegt auf der Drag und Drop Funktionalität.</p>


<a class="slide_break" id="slide-2" href="slide.html#slide-2"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 2">▻</a>

<h2 id="die-ausgangslage">Die Ausgangslage</h2>

<p>Dieses Programm wird umfangreich. Deswegen werden von Anfang an Strukturen
zur Wiederverwertung von Code gelegt:</p>

<p>Für den Editor, und für Rechtecke (Rectangles) und Kreise (Circles) werden
jeweils Konstruktor-Funktionen angelegt, mit der Editor-, Rechteck-, und Kreis-Objekte
erzeugt werden können.</p>


<a class="slide_break" id="slide-3" href="slide.html#slide-3"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 3">▻</a>

<h3 id="editor">Editor</h3>

<p>Die Konstruktur-Funktion des <strong>Editor</strong> Objekts nimmt folgende Argumente</p>

<ul>
  <li><code>css_selector</code> - ein String, wird als CSS-Selector interpretiert. Der Inhalt des ausgewählten DOM-Elements wird gelöscht, statt dessen wird der Editor angezeigt</li>
  <li><code>w</code> - optional eine Zahl oder ein String der eine Zahl enthält. Breite des Editors. Default Wert 600.</li>
  <li><code>h</code> - optional eine Zahl oder ein String der eine Zahl enthält. Höhe des Editors. Default Wert 600.</li>
</ul>

<p>Das <strong>Editor</strong> Objekt hat folgende Attribute:</p>

<ul>
  <li><code>dom</code> - das SVG-Element</li>
  <li><code>renderlist</code> - eine Liste mit Objekten, die im Editor dargestellt werden</li>
</ul>

<p>Das <strong>Editor</strong> Objekt hat folgende Methoden</p>

<ul>
  <li><code>rectangle</code> - Erzeugt ein Objekt mit dem <code>Rectangle</code>-Konstruktur, fügt es in der renderlist ein</li>
  <li><code>circle</code> - Erzeugt ein Objekt mit dem <code>Circle</code>-Konstruktur, fügt es in der renderlist ein</li>
</ul>


<a class="slide_break" id="slide-4" href="slide.html#slide-4"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 4">▻</a>



<div class="example">
<h4 class="caption">Javascript Code <small>Konstruktor</small></h4>
<pre><code class="language-javascript  linenums">function Editor( css_selector, w, h ) {
  this.renderlist = [];
  this.dom = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
  this.dom.setAttribute(&quot;width&quot;, w || 600);
  this.dom.setAttribute(&quot;height&quot;, h || 600);
  emptyAndAppendChild( document.querySelector( css_selector ), this.dom );
  return this;
}
Editor.prototype.rectangle = function(  x,y,w,h,att, text ) {
  var o;
  o = new Rectangle( x,y,w,h, att, this.dom );
  this.renderlist.push(o);
  return o;
}
Editor.prototype.circle = function( x,y,r,att, text ) {
  var o;
  o = new Circle( x,y,r,att, this.dom );
  this.renderlist.push(o);
  return o;
}
</code></pre></div>


<a class="slide_break" id="slide-5" href="slide.html#slide-5"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 5">▻</a>

<h3 id="circle-und-rectangle">Circle und Rectangle</h3>

<p>Circle und Rectangle funktionieren sehr ähnlich, deswegen werden sie hier gemeinsam
beschreiben.  Als SVG-Elemente betrachtet gibt es größere Unterschiede: so wird die
Position eines <code>&lt;circles&gt;</code> über die Attribute <code>cx</code> und <code>cy</code> gesetzt, die Position eines
<code>&lt;rect&gt;</code> über <code>x</code> und <code>y</code>.  Diese Unterschiede werden durch die neu erstellen Javascript-Objekte
möglichst verborgen.</p>

<p>Die Signatur der Konstruktur-Funktion sind:</p>

<ul>
  <li>Rectangle(x,y,w,h,att,canvas)</li>
  <li>Circle(x,y,r,att, canvas )</li>
</ul>

<p>Fast alle Argumente sind also gleich und gleich bedeutend. Der einzige Unterschied: Die 
Größe des  Rechtecks wird über Breite <code>w</code> und Höhe <code>h</code> definiert, die Größe
des Kreis über den Radius <code>r</code>.  Der Aufruf der Konstruktors erzeugt das SVG-Element,
fügt es in den canvas ein, setzt die Attribute und fügt geeignete Event-Handler für drag-and-drop
ein.</p>

<p>Die anderen Argumente sind:</p>

<ul>
  <li><code>x</code> und <code>y</code>- Position (beim Rechteck: der linken oberen Ecke. beim Kreis: des Mittelpunktes)</li>
  <li><code>att</code> - ein Objekt. Die Attribute des Objekts werden auf das erzeugte SVG-Element übertragen, z.B. <code>{'stroke': 'red', 'fill': 'white'}</code></li>
  <li><code>canvas</code> - eine DOM-Element das geeignet ist ein <code>&lt;rect&gt;</code> oder <code>&lt;circle&gt;</code> Element aufzunehmen. z.B. ein <code>&lt;svg&gt;</code> Element.</li>
</ul>

<p>Das <strong>Rectangle</strong> und das <strong>Circle</strong> Objekt haben folgende Attribute:</p>

<ul>
  <li><code>dom</code> - das SVG-Element, also der Kreis oder das Rechteck</li>
  <li><code>canvas</code> - das parent-Element in das es eingefügt wurde</li>
  <li><code>id</code> - die ID (wird auch im SVG-Element selbst noch einmal gesetzt)</li>
</ul>

<p>Das <strong>Rectangle</strong> und das <strong>Circle</strong> Objekt haben folgende Methoden</p>

<ul>
  <li><code>getPosition</code> - Liefert die Position (aus den SVG-Attributen x/y bzw. cx/xy) als Objekt mit Eigenschaften <code>x</code> und <code>y</code></li>
  <li><code>setPosition( position )</code> - erwartet die Position als Objekt mit Eigenschaften <code>x</code> und <code>y</code>, positioniert das Element entsprechend</li>
</ul>


<a class="slide_break" id="slide-6" href="slide.html#slide-6"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 6">▻</a>



<div class="example">
<h4 class="caption">Javascript Code <small>Konstruktor für Kreis</small></h4>
<pre><code class="language-javascript  linenums">var nextCircleId = idGenerator( &quot;cicle&quot; );
function Circle( x,y,r,att, canvas ) {
  var shape,a;
  this.id = nextCircleId();
  this.canvas = canvas;
  //   &lt;circle&gt;
  this.dom = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;circle&quot;);
  this.dom.setAttribute(&quot;id&quot;, this.id);
  this.dom.setAttribute(&quot;cx&quot;, x);
  this.dom.setAttribute(&quot;cy&quot;, y);
  this.dom.setAttribute(&quot;r&quot;,  r);
  addAttributes(this.dom, att, {&quot;fill&quot;: &quot;white&quot;, &quot;stroke&quot;: &quot;black&quot;, &quot;stroke-width&quot;: 1});
  canvas.appendChild(this.dom);
  
  addDragability( this, this.dom );
}
Circle.prototype.getPosition = function () {
  return {  x: parseInt( this.dom.getAttribute( &quot;cx&quot; ) ), y : parseInt( this.dom.getAttribute(&quot;cy&quot;) ) };
};
Circle.prototype.setPosition = function ( position ) {
  this.dom.setAttribute(&quot;cx&quot;, position.x );
  this.dom.setAttribute(&quot;cy&quot;, position.y );
};
</code></pre></div>


<a class="slide_break" id="slide-7" href="slide.html#slide-7"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 7">▻</a>

<h2 id="drag-and-drop">Drag and Drop</h2>

<p>Wie funktioniert Drag-and-Drop?  Wir haben die Events <code>mousedown</code>, <code>mouseup</code> und <code>mousemove</code> zur Verfügung.</p>

<ul>
  <li>Wenn die Maus-Taste gedrückt wird, und der Mauszeiger über einem Rechteck oder Kreis steht, dann beginnt das Drag-and-Drop. Die Position der Maus und des Objekt zu diesem Start-Zeitpunkt müssen gespeichert werden.</li>
  <li>Wenn die Maus sich beweget, und wir in einem Drag-and-Drop sind, dann wird die differenz zwischen aktueller Maus-Position und der Start-Position berechnet. Das ergibt einen Translations-Vektor. Dieser Vektor wird zur Startposition des Objekts addiert und ergibt die aktuelle Position des Objekts. (“Drag”)</li>
  <li>Wenn die Maus los gelassen wird wird Drag-and-Drop beendet</li>
</ul>


<a class="slide_break" id="slide-8" href="slide.html#slide-8"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 8">▻</a>

<h3 id="mausposition">Mausposition</h3>

<p>Das Auslesen der aktuellen Mous-Position ist leider nicht einheitlich implementiert.
Hier eine Implementierung die in allen Browsern funktionieren sollte:</p>

<div class="example">
<h4 class="caption">Javascript Code <small>auslesen der Maus-Position aus einem Event-Objekt</small></h4>
<pre><code class="language-javascript  linenums">function cursorPoint(e) {
  var posx = 0;
  var posy = 0;
  if (!e) var e = window.event;
  if (e.pageX || e.pageY)   {
    posx = e.pageX;
    posy = e.pageY;
  }
  else if (e.clientX || e.clientY)  {
    posx = e.clientX + document.body.scrollLeft
      + document.documentElement.scrollLeft;
    posy = e.clientY + document.body.scrollTop
      + document.documentElement.scrollTop;
  }
  // posx and posy contain the mouse position relative to the document
  // Do something with this information
  return { &#39;x&#39;: posx, &#39;y&#39;: posy  };
}
</code></pre></div>


<a class="slide_break" id="slide-9" href="slide.html#slide-9"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 9">▻</a>

<h3 id="wiederholung-event-listener">Wiederholung: Event-Listener</h3>

<p>Wenn wir Event-Listener-Funktionen für diese Events definieren haben wir der
Funktion jeweils Zugriff auf ein Element der DOM, das durch das Event betroffen ist.</p>

<p>Also zum Beispiel:</p>

<div class="example">
<h4 class="caption">Javascript Code <small>Event Listener</small></h4>
<pre><code class="language-javascript  linenums">function onMouseDown(e) {
  console.log(&quot;Mouse down. this is &quot; + this.id + &quot; event is &quot; + e);
}
element.addEventListener( &#39;mousedown&#39;, onMouseDown);
</code></pre></div>

<p>Wenn die Funktion onMouseDown aufgerufen wird enthält
<code>this</code> das angeklickte Element, und <code>e</code> enthält ein Event-Objekt mit
weiteren Details.</p>


<a class="slide_break" id="slide-10" href="slide.html#slide-10"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 10">▻</a>

<h3 id="problemstellung-vom-dom-element-zum-javascript-objekt">Problemstellung: vom DOM-Element zum Javascript-Objekt</h3>

<p>In unserem Javascript-Programm wird ein Kreis nicht alleine durch
die SVG-Node <code>&lt;circle&gt;</code> repräsentiert, sondern durch ein Javascript-Objekt
das mit dem Konstruktor <code>Circle</code> erzeugt wurde.</p>

<p>Wie kann die Listener-Funktion Zugriff zu diesem Javascript-Objekt erhalten?</p>

<p>Ein Versuch wäre, das Javascript-Objekt im SVG-Element zu speichern.
zum Beispiel in einem Data-Attribut. In HTML5 darf man ja zu jedem
Tag / Element beliebige neue Attribute dazu erfinden, solange der
Name des Attributs mit “data-“ beginnt.</p>

<div class="example">
<h4 class="caption">Html Code <small>data-Attribute in HTML5</small></h4>
<pre><code class="language-html  linenums">&lt;h1 data-geheim=&quot;wichtig daten&quot;&gt;Normaler Überschrift&lt;/h1&gt;
....
&lt;circle data-weight=&quot;10kg&quot;&gt;
</code></pre></div>


<a class="slide_break" id="slide-11" href="slide.html#slide-11"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 11">▻</a>



<p>Ein Data-Attribut könnte man mit Javascript setzen. Hier ein Versuch:</p>

<div class="example">
<h4 class="caption">Javascript Code <small>Javascript-Objekte in einem Data-Attribut in der DOM speichern - geht nicht</small></h4>
<pre><code class="language-javascript  linenums">// Versuch ein Objekt zu speichern
c = document.getElementById(&quot;circle_1&quot;);
c.setAttribute(&quot;data-myobject&quot;, { color: &#39;red&#39;, no: 42 } ); 
// auslesen der Daten
o = c.getAttribute(&quot;data-myobject&quot;);    
typeof o        // ergibt &quot;string&quot;
console.log(o)  // ergibt &quot;[object Object]&quot;
</code></pre></div>

<p>Beim Speichern in der DOM wurde also mein Objekt in einen String umgewandelt,
und nur der String wurde gespeichert.</p>

<p><strong>Es ist nicht möglich beliebige Javascript-Objekte in der DOM zu speicher!</strong></p>


<a class="slide_break" id="slide-12" href="slide.html#slide-12"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 12">▻</a>

<h3 id="lsungs-ansatz-mit-closure">Lösungs-Ansatz mit Closure</h3>

<p>Die übliche Lösung in Javascript ist die Verwendung von Closures: die Event-Listener-Funktion
ist eine Closure, die das Javascript-Objekt kennt, und deswegen darauf Zugriff hat.</p>

<div class="example">
<h4 class="caption">Javascript Code <small>Event-Listener-Funktion als Closure</small></h4>
<pre><code class="language-javascript  linenums">function addDragability( jsobj, element ) {
  function onMouseDown(e) {
    console.log(&quot;Mouse down&quot;);
    console.log(&quot;my element is &quot; + this);
    console.log(&quot;my javascript object is &quot; + jsobj);
    console.log(&quot;my event is &quot; + e);
  }
  element.addEventListener( &#39;mousedown&#39;, onMouseDown);
}
addDragability( jsobj, element );
addDragability( other_jsobj, other_element );
</code></pre></div>


<a class="slide_break" id="slide-13" href="slide.html#slide-13"  title="Wechsle zur Präsentations-Ansicht, Folie Nr. 13">▻</a>

<h3 id="umsetzung">Umsetzung</h3>

<p>Wenn man die Beschreibung von Drag-and-Drop nochmal betrachtet …</p>

<ul>
  <li>Wenn die Maus-Taste gedrückt wird, und der Mauszeiger über einem Rechteck oder Kreis steht, dann beginnt das Drag-and-Drop. Die Position der Maus und des Objekt zu diesem Start-Zeitpunkt müssen gespeichert werden.</li>
  <li>Wenn die Maus sich beweget, und wir in einem Drag-and-Drop sind, dann wird die Differenz zwischen aktueller Maus-Position und der Start-Position berechnet. Das ergibt einen Translations-Vektor. Dieser Vektor wird zur Startposition des Objekts addiert und ergibt die aktuelle Position des Objekts. (“Drag”)</li>
  <li>Wenn die Maus los gelassen wird wird Drag-and-Drop beendet</li>
</ul>

<p>und das nun in Event-Listener umsetzen will kommt man zu folgender Struktur</p>

<div class="example">
<h4 class="caption">Javascript Code <small>Struktur der Event-Listener für Drag-and-Drop</small></h4>
<pre><code class="language-javascript  linenums">function addDragability( jsobj, element ) {
  function onMove(e) {
    // die Differenz zwischen aktueller Maus-Position 
    // und der Start-Position berechnen. Das ergibt 
    // einen Translations-Vektor. 
    // Diesen Vektor zur Startposition des Objekts 
    // addieren, aktuelle Position des Objekts setzen
  }
  function onMouseDown(e) {
    // Drag-und-Drop beginnt: den richtigen Eventlistener 
    // für mousemove setzen
    // Die Position der Maus und des Objekt zu diesem 
    // Start-Zeitpunkt müssen gespeichert werden.
  }
  function onMouseUp(e) {
    // Drag-and-Drop beenden: nicht mehr gebrauchte 
    // event-listener entfernen
  }
  console.log( jsobj + &quot; und damit &quot; + element + &quot; sind nun draggable&quot;);
</code></pre></div>

<div class="alert"><strong>ToDo</strong> fertigen Code zeigen - später</div>
 <div class="pagination">
  <ul>
    
      
      
      <li><a href="/advanced-javascript/call/">Funktion Aufrufen</a></li>
      
      
      
      <li><a href="/advanced-javascript/vererbung/">Prototypen + Vererbung</a></li>
      
    
  </ul>
</div>

  </div>

  <!-- sidebar -->
<div id="sidebar" class="span3 offset1">
        <div class="page-header">
        <h2>Kapitel</h2>
        </div>


        <ul class="nav nav-list">
        
          
          <li class=" "><a href="/das-web-und-html/">Das Web Und Html</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/das-web-und-html/geschichte/">Eine Kurze Geschichte des World Wide Web</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/standards/">Drei Standards definieren das Web</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/bnf/">BNF</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/html-grundkurs/">HTML Grundkurs</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/upload/">Upload und Tools</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/css/">Css</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/css/css-kurz/">Kurzvorstellung von Stylesheets</a></li>
                      
                    
                      
                      <li ><a href="/css/css/">Syntax von CSS</a></li>
                      
                    
                      
                      <li ><a href="/css/properties/">Wichtige Properties</a></li>
                      
                    
                      
                      <li ><a href="/css/css-sprites/">CSS Sprites</a></li>
                      
                    
                      
                      <li ><a href="/css/basic-selectors/">CSS Selektoren</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/css-layout/">Css Layout</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/css-layout/layout/">CSS für Layout</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/responsive/">Responsive Design</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/navigation/">Navigationsmenü</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/selektoren/">CSS Selektoren im Detail</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/details/">Details zu Layout</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/urls/">Urls</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/urls/absolut-relativ/">Absolute und relative URLs</a></li>
                      
                    
                      
                      <li ><a href="/urls/konfiguration/">Konfiguration Webserver</a></li>
                      
                    
                      
                      <li ><a href="/urls/tipps/">Pragmatische Tipps</a></li>
                      
                    
                      
                      <li ><a href="/urls/hash/">Fragment</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/formulare/">Formulare</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/formulare/form/">Formulare</a></li>
                      
                    
                      
                      <li ><a href="/formulare/check/">Formularprüfung</a></li>
                      
                    
                      
                      <li ><a href="/formulare/interaktion/">Formular als Interaktion</a></li>
                      
                    
                      
                      <li ><a href="/formulare/css/">CSS und Formular</a></li>
                      
                    
                      
                      <li ><a href="/formulare/action/">Daten absenden</a></li>
                      
                    
                      
                      <li ><a href="/formulare/php/">Formular und PHP</a></li>
                      
                    
                      
                      <li ><a href="/formulare/javascript/">Formular und Javascript</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/javascript-dom/">Javascript Dom</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/javascript-dom/hintergrund/">Hintergründe</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/graceful/">Graceful Degradation</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/basic-javascript/">Basic Javascript</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/include-javascript/">Include Javascript</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/dom/">DOM</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/canvas/">2D Canvas</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/formular-zeile/">Formular++</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" separator"><a href="/jquery/">Jquery</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/jquery/unobstrusive/">Unobstrusive Javascript</a></li>
                      
                    
                      
                      <li ><a href="/jquery/graceful/">Graceful Degradation</a></li>
                      
                    
                      
                      <li ><a href="/jquery/schreibweise/">Besondere Javascript-Schreibwesen in jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/selektieren-manipulieren/">Selektieren und Manipulieren mit jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/interaktion/">Interaktion mit jQuery</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/kommandozeile/">Kommandozeile</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/kommandozeile/kommandozeile/">Kommandozeile</a></li>
                      
                    
                      
                      <li ><a href="/kommandozeile/shellscript/">Shellscript</a></li>
                      
                    
                      
                      <li ><a href="/kommandozeile/vscode-remote-ssh/">VS Code</a></li>
                      
                    
                      
                      <li ><a href="/kommandozeile/wo-bin-ich/">Wo bin ich</a></li>
                      
                    
                      
                      <li ><a href="/kommandozeile/zugriffsrechte/">Zugriffsrechte</a></li>
                      
                    
                      
                      <li ><a href="/kommandozeile/bild-und-video/">Bild und Video</a></li>
                      
                    
                      
                      <li ><a href="/kommandozeile/docker/">Docker</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/git/">Git</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/git/versionskontrolle/">Versionskontrolle</a></li>
                      
                    
                      
                      <li ><a href="/git/basic-git/">Arbeitsablauf</a></li>
                      
                    
                      
                      <li ><a href="/git/git-status/">Status von Git abfragen</a></li>
                      
                    
                      
                      <li ><a href="/git/commits/">Commit</a></li>
                      
                    
                      
                      <li ><a href="/git/git-zwei/">Git für Zwei</a></li>
                      
                    
                      
                      <li ><a href="/git/git-branching/">Git Branching</a></li>
                      
                    
                      
                      <li ><a href="/git/git-tools/">Tools für Git</a></li>
                      
                    
                      
                      <li ><a href="/git/public-private-key/">Public und Private Key</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/http/">Http</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/http/tcpip-und-dns/">TCP/IP und DNS</a></li>
                      
                    
                      
                      <li ><a href="/http/http/">HTTP</a></li>
                      
                    
                      
                      <li ><a href="/http/tools/">Werkzeuge</a></li>
                      
                    
                      
                      <li ><a href="/http/anwendungsbeispiele/">Beispiele</a></li>
                      
                    
                      
                      <li ><a href="/http/php-erzeugt/">PHP erzeugt nicht nur HTML</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/php-vorbereitung/">Php Vorbereitung</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-vorbereitung/was-ist-php/">Was ist PHP? Was passiert am Webserver?</a></li>
                      
                    
                      
                      <li ><a href="/php-vorbereitung/apache/">Webserver mit PHP oder Apache</a></li>
                      
                    
                      
                      <li ><a href="/php-vorbereitung/erstes-php-programm/">Das erste PHP-Programm</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/php/">Php</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php/warnhinweis/">Warnhinweis</a></li>
                      
                    
                      
                      <li ><a href="/php/syntax/">Syntax von PHP</a></li>
                      
                    
                      
                      <li ><a href="/php/dateien/">Dateien und Ordnern in PHP</a></li>
                      
                    
                      
                      <li ><a href="/php/mail/">PHP und E-Mail</a></li>
                      
                    
                      
                      <li ><a href="/php/php-und-parameter/">Daten aus dem Web-Formularen prüfen</a></li>
                      
                    
                      
                      <li ><a href="/php/datei-upload/">Datei Upload</a></li>
                      
                    
                      
                      <li ><a href="/php/datei-upload-frontend/">Datei Upload - Frontend</a></li>
                      
                    
                      
                      <li ><a href="/php/api/">API verwenden mit PHP</a></li>
                      
                    
                      
                      <li ><a href="/php/error/">Errors + Debugging</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/php-db-lesen/">Php Db Lesen</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-db-lesen/db/">Datenbanken</a></li>
                      
                    
                      
                      <li ><a href="/php-db-lesen/start/">PHP und Datenbank</a></li>
                      
                    
                      
                      <li ><a href="/php-db-lesen/struktur-webapplikation/">Struktur einer Web-Applikation</a></li>
                      
                    
                      
                      <li ><a href="/php-db-lesen/datenbank-lesen/">Lesen aus der Datenbank</a></li>
                      
                    
                      
                      <li ><a href="/php-db-lesen/effizent/">Effizient Arbeiten mit der DB</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/session/">Session</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/session/cookies/">Cookies</a></li>
                      
                    
                      
                      <li ><a href="/session/session-und-login/">Session und Login</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/php-db-schreiben/">Php Db Schreiben</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-db-schreiben/datenbank-schreiben/">Web-Applikation mit Schreibrecht</a></li>
                      
                    
                      
                      <li ><a href="/php-db-schreiben/daten-loeschen/">Löschen</a></li>
                      
                    
                      
                      <li ><a href="/php-db-schreiben/daten-einfuegen/">Einfügen</a></li>
                      
                    
                      
                      <li ><a href="/php-db-schreiben/daten-editieren/">Daten Bearbeiten</a></li>
                      
                    
                      
                      <li ><a href="/php-db-schreiben/fehlerbehandlung/">Fehlerbehandlung</a></li>
                      
                    
                      
                      <li ><a href="/php-db-schreiben/html-erlauben/">HTML erlauben</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" separator"><a href="/php-db-optimierung/">Php Db Optimierung</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-db-optimierung/indexes/">Indexes</a></li>
                      
                    
                      
                      <li ><a href="/php-db-optimierung/constraints/">Constraints</a></li>
                      
                    
                      
                      <li ><a href="/php-db-optimierung/alter/">Änderungen an der Datenbank</a></li>
                      
                    
                      
                      <li ><a href="/php-db-optimierung/transaktionen/">Transaktionen</a></li>
                      
                    
                      
                      <li ><a href="/php-db-optimierung/transaktionen-und-php/">Transaktionen und PHP</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/grafik/">Grafik</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/grafik/cssgrafik/">HTML+CSS für Grafik</a></li>
                      
                    
                      
                      <li ><a href="/grafik/images/">Pixel-Bilder</a></li>
                      
                    
                      
                      <li ><a href="/grafik/svg/">SVG - Vektor Grafik</a></li>
                      
                    
                      
                      <li ><a href="/grafik/2dcanvas/">2d Canvas</a></li>
                      
                    
                      
                      <li ><a href="/grafik/3dcanvas/">3d Canvas</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/javascript/">Javascript</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/javascript/variablen/">Variablen und Scope</a></li>
                      
                    
                      
                      <li ><a href="/javascript/funktionen/">Funktionen und this</a></li>
                      
                    
                      
                      <li ><a href="/javascript/mehr_funktionen/">Mehr Funktionen</a></li>
                      
                    
                      
                      <li ><a href="/javascript/objekte/">Objekte + Klassen</a></li>
                      
                    
                      
                      <li ><a href="/javascript/closures/">Funktionen und Closures</a></li>
                      
                    
                      
                      <li ><a href="/javascript/module/">Module</a></li>
                      
                    
                      
                      <li ><a href="/javascript/style/">Stil + Tipps</a></li>
                      
                    
                      
                      <li ><a href="/javascript/debugging/">Debugging</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/applied-js-and-css/">Applied Js And Css</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/applied-js-and-css/formularpruerung/">Formulardaten Prüfen</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/header/">Fixe Kopfzeile mit Animation</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/langsam-scrollen/">Langsam Scrollen</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/dynamisches-formular/">Dynamisches Formular</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/browser-speicher/">Speichern im Browser</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/set_timeout/">setTimeout</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/cors/">CORS</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/landkarte/">Landkarte</a></li>
                      
                    
                      
                      <li ><a href="/applied-js-and-css/websocket/">Chat Websockets</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/js-http/">Js Http</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/js-http/ajax/">AJAX</a></li>
                      
                    
                      
                      <li ><a href="/js-http/await/">Async/Await</a></li>
                      
                    
                      
                      <li ><a href="/js-http/ajax-autocomplete/">Autocomplete</a></li>
                      
                    
                      
                      <li ><a href="/js-http/ajax-api/">API verwenden</a></li>
                      
                    
                      
                      <li ><a href="/js-http/ajax-irrwege/">AJAX Irrwege</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/json/">Json</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/json/syntax/">JSON Syntax</a></li>
                      
                    
                      
                      <li ><a href="/json/php/">JSON und PHP</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" separator"><a href="/xml/">Xml</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/xml/was-ist-xml/">Was ist XML</a></li>
                      
                    
                      
                      <li ><a href="/xml/wohlgeformtes-xml/">wohlgeformtes XML</a></li>
                      
                    
                      
                      <li ><a href="/xml/dtd/">DTD</a></li>
                      
                    
                      
                      <li ><a href="/xml/xml-und-php/">XML und PHP</a></li>
                      
                    
                      
                      <li ><a href="/xml/xml-und-javascript/">XML und Javascript</a></li>
                      
                    
                      
                      <li ><a href="/xml/xpath/">XPath</a></li>
                      
                    
                      
                      <li ><a href="/xml/rss/">Beispiel RSS</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/security/">Security</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/security/thread-modeling/">Threat Modeling</a></li>
                      
                    
                      
                      <li ><a href="/security/a1-zugriffskontrolle/">A1 - Zugriffskontrolle</a></li>
                      
                    
                      
                      <li ><a href="/security/a2-crypto/">A2 - Cryptographic Failures</a></li>
                      
                    
                      
                      <li ><a href="/security/a3-injection/">A3 - Injection + XSS</a></li>
                      
                    
                      
                      <li ><a href="/security/a4-design/">A4 - Insecure design</a></li>
                      
                    
                      
                      <li ><a href="/security/a5-fehlkonfiguration/">A5 - Fehlkonfiguration</a></li>
                      
                    
                      
                      <li ><a href="/security/a6-komponenten/">A6 - Komponenten</a></li>
                      
                    
                      
                      <li ><a href="/security/a7-auth/">A7 - Identification and Authentication Failures</a></li>
                      
                    
                      
                      <li ><a href="/security/a8-integrity/">A8 - Software and Data Integrity Failures</a></li>
                      
                    
                      
                      <li ><a href="/security/a9-logging-monitoring/">A9 - Monitoring</a></li>
                      
                    
                      
                      <li ><a href="/security/a10-ssrf/">A10 - Server Side Request Forgery (SSRF)</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/wordpress/">Wordpress</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/wordpress/was-ist-wordpress/">Was ist Wordpress</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/installation/">Kurz-Installation von Wordpress</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/security/">Security</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/backend/">Überblick Backend</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/seiten/">Beiträge und Seiten</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/multimedia/">Medien</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/themes-sidesbars-widgets/">Themes, Sidebars und Widgets verwenden</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/plugins/">Plugins verwenden</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/permalinks/">Permalinks</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/apache/">Apache</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/apache/konfigurieren/">Konfigurieren</a></li>
                      
                    
                      
                      <li ><a href="/apache/auth/">Authentisierung</a></li>
                      
                    
                      
                      <li ><a href="/apache/rewrite/">Rewrite</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class="active "><a href="/advanced-javascript/">Advanced Javascript</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/advanced-javascript/call/">Funktion Aufrufen</a></li>
                      
                    
                      
                      <li class="active"><a href="/advanced-javascript/event-und-closure/">Events und Closures</a></li>
                      
                    
                      
                      <li ><a href="/advanced-javascript/vererbung/">Prototypen + Vererbung</a></li>
                      
                    
                      
                      <li ><a href="/advanced-javascript/regular-expressions/">Regular Expressions</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/mobile/">Mobile</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/mobile/responsive/">Responsive Design</a></li>
                      
                    
                      
                      <li ><a href="/mobile/pwa/">Progressive Web App</a></li>
                      
                    
                      
                      <li ><a href="/mobile/cordova/">Cordova</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
          <li class=" "><a href="/qualitaet/">Qualitaet</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/qualitaet/barrierefreiheit/">Barrierefreiheit</a></li>
                      
                    
                      
                      <li ><a href="/qualitaet/datenschutz/">Datenschutz</a></li>
                      
                    
                      
                      <li ><a href="/qualitaet/performance/">Performance</a></li>
                      
                    
                      
                      <li ><a href="/qualitaet/rest/">REST</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
        
        </ul>

</div>
<!-- sidebar -->

</article>
<!-- /body -->


  <div class="row">
    <div class="span12" id="legal">
        <p class="copyright">veröffentlicht unter <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> in den Jahren 2012-2024 von <a href="#">Brigitte Jellinek</a>.</p>
        <p>Zum Weiterentwickeln dieser Seite: <a href="https://github.com/web-development/web-development-textbook">Projekt forken</a> oder <a href="https://github.com/web-development/web-development-textbook/blob/master/content/advanced-javascript/event-und-closure.md">Kommentar zu dieser Seite</a></p>
    </div>
  </div>

</div> <!-- class="container" -->
<script
			  src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
			  integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
			  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/shell.min.js"></script>
<script>hljs.highlightAll();</script>
<script>
  $(document).ready(function(){
    function save_state(){
      var stored = "";
      $('ul.nav > li').each(function(i,e){
        if( $(e).find("i").attr('class') == 'icon-plus' ) {
          stored += "-";
        }  else {
          stored += "+";
        }
      });
      localStorage.setItem('nav-state', stored);
    }
    $('ul.nav > li > a').prepend("<i class='icon-plus'></i>");

    // init state
    var stored = localStorage.getItem('nav-state');
    if ( stored ) {
      var data = stored.split("");
      $('ul.nav > li').each(function(i,e){
        if( data[i] == "+" ) {
          $(e).find(">ul").show();
          $(e).find("i").removeClass('icon-plus').addClass('icon-minus');
        } else {
          $(e).find(">ul").hide();
        }
      });
    } else {
      $('ul.nav ul.sub').hide();
    }
    $('ul.nav li.active ul.sub').show();
    $('ul.nav li.active i').removeClass('icon-plus').addClass('icon-minus');

    $('ul.nav i').click(function(){
      $this = $(this);
      $this.toggleClass('icon-plus').toggleClass('icon-minus');
      $this.parent().next('ul').toggle();
      save_state();
      return false;
    });
  });
</script>
</body>
</html>

